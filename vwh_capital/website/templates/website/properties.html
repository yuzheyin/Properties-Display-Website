{% extends "website/base.html" %}
{% block content %}
{% load staticfiles %}
<div style="height:80px;"></div>
<!-- Page Content -->
<div id="wrapper" class="toggled">

	<!-- Sidebar -->
	<div id="sidebar-wrapper">
		<div class="blog-asside-right pr0">
            <div class="panel panel-default sidebar-menu wow fadeInRight animated animated" style="visibility: visible; animation-name: fadeInRight;">
                <div class="panel-heading">
                    <h4 class="panel-title" style="color:white;margin: 20px 30px;">Most Viewed</h4>
                </div>

                <div class="panel-body search-widget">
                    <form action="" class=" form-inline">

                        <div class="container">
                            <div class="row justify-content-md-center">



                                {% for prop in most_viewed %}
                                <div class="col-md-12" style="margin-bottom:20px;" >
                                    <a href="{% url 'details' prop.id %}">
                                        <img class="img-fluid" src="{%  url 'main_picture' prop.id %}" alt="NA" style="position:relative;height:180px;width:auto; margin: 0 auto 1em auto;">
                                        <div style="background-color:#002053;opacity:0.65;position:absolute;left:15px;top:150px;width:89%">
                                        <p style="color:white; text-align:center;"> {{prop.address.street_number}} {{prop.address.route}}, {{prop.address.locality.city}}, {{prop.address.locality.state}} </p></div>
                                    </a>
                                </div>
                                {% endfor %}

                                </div>



                        </div>

                    </form>
                </div>
            </div>


        </div>


	</div>
	<!-- /#sidebar-wrapper -->

	<!-- Page Content -->
	<div id="page-content-wrapper">
		<section class="main-search">
			<div class="container">
				<div class="main-search__container">
					<section class="listing-search">
						<form action="{% url 'properties' %}" method="get" class="listing-search__form">
							<div class="row">
								<div class="col-sm-3">
										<label for="keywords" class="listing-search__label">Keyword</label>
										<input id="keywords" class="listing-search__field" placeholder="Type city/street ..." type="text">
								</div><!-- .col -->

								<div class="col-sm-3">
									<label for="state" class="listing-search__label">Select State</label>
									<select name="state" id="state" class="ht-field" data-dkcacheid="2">
										<option value="All" selected="">All State</option>
										<option value="Florida">Florida</option>
										<option value="Georgia">Georgia</option>
										<option value="New York">New York</option>
										<option value="Pennsylvania">Pennsylvania</option>
										<option value="Oklahoma">Oklahoma</option>
										<option value="Michigan">Michigan</option>
										<option value="Ohio">Ohio</option>
										<option value="Georgia">Georgia</option>
									</select>
								</div><!-- .col -->

								<div class="col-sm-3">
									<label for="listing-btn" class="listing-search__label listing-search__label--hidden">Advanced Search</label>
									<a href="#" id="listing-btn" class="listing-search__btn"><label id="advance">Advanced Options</label> <i class="material-icons md-18">menu</i></a>
								</div><!-- .col -->

								<div class="col-sm-3">

									<button type="submit" class="btn btn-primary btn-md" style="margin-top:20px;width:240px;">Search <i class="material-icons md-18">search</i></button>
								</div><!-- .col -->
							</div><!-- row -->

							<div class="listing-search__advance">
								<div class="row">

									<div class="col-sm-3">
										<label for="bedrooms" class="listing-search__label">Bedrooms</label>
										<select name="bedrooms" id="bedrooms" class="ht-field" data-dkcacheid="4">
											<option value="0" selected="">Any</option>
											<option value="1">1+ </option>
											<option value="2">2+ </option>
											<option value="3">3+ </option>
											<option value="4">4+ </option>
											<option value="5">5+ </option>
										</select>
									</div><!-- .col -->

									<div class="col-sm-3">
										<label for="bathrooms" class="listing-search__label">Bathrooms</label>
										<select name="bathrooms" id="bathrooms" class="ht-field" data-dkcacheid="5">
											<option value="0" selected="">Any</option>
											<option value="1">1+ </option>
											<option value="2">2+ </option>
											<option value="3">3+ </option>
											<option value="4">4+ </option>
											<option value="5">5+ </option>
										</select>
									</div><!-- .col -->

								</div><!-- .row -->
								<div class="row">
									<div class="col-sm-6">
										<label for="property-size" class="listing-search__label">Price Range</label>
										<div class="listing-search__amount">
											<label for="property-amount">$ </label>
											<span id="property-amount">10000 - 1000000</span>
										</div><!-- listing-search__amount -->
										<div id="property-size" class="listing-search__slider listing-search__property-size ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"><span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default" style="left: 0%;"></span><span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default" style="left: 100%;"></span></div>
									</div><!-- .col -->
									<input hidden id="price_top" name="price_top">
									<input hidden id="price_bottom" name="price_bottom">
									<div class="col-sm-6">
										<label for="lot-size" class="listing-search__label">Living Size Range</label>
										<div class="listing-search__amount">
											<label for="lot-amount">Sq.Ft </label>
											<span id="lot-amount">100 - 5000</span>
										</div><!-- .listing-search__amount -->
										<div id="lot-size" class="listing-search__slider listing-search__lot-size ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"><span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default" style="left: 0%;"></span><span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default" style="left: 100%;"></span></div>
									</div><!-- .col -->
									<input hidden id="size_top" name="size_top">
									<input hidden id="size_bottom" name="size_bottom">
								</div>

								<div class="listing-search__more">
									<a class="listing-search__more-btn" href="#">Additional Features</a>

									<div class="listing-search__more-inner">
										<div class="row">
											<div class="col-sm-6 col-md-3">
												<div class="listing-search__more-wrapper">
													{% if request.COOKIES.garage == "on" %}
													<input name="garage" id="garage" class="listing-search__more-field" type="checkbox" checked>
													{% else %}
													<input name="garage" id="garage" class="listing-search__more-field" type="checkbox">
													{% endif %}
													<label for="garage" class="listing-search__more-label">Parking/Garage</label>
												</div><!-- .listing-search__more-wrapper -->

												<div class="listing-search__more-wrapper">
													{% if request.COOKIES.basement == "on" %}
													<input name="basement" id="basement" class="listing-search__more-field" type="checkbox" checked>
													{% else %}
													<input name="basement" id="basement" class="listing-search__more-field" type="checkbox">
													{% endif %}
													<label for="basement" class="listing-search__more-label">Basement</label>
												</div>

												<div class="listing-search__more-wrapper">
													{% if request.COOKIES.pool == "on" %}
													<input name="pool" id="pool" class="listing-search__more-field" type="checkbox" checked>
													{% else %}
													<input name="pool" id="pool" class="listing-search__more-field" type="checkbox">
													{% endif %}
													<label for="pool" class="listing-search__more-label">Pool</label>
												</div>


											</div>

										</div><!-- .row -->
									</div><!-- .listing-search__more-inner -->
								</div><!-- .listing-search__more -->
							</div><!-- .listing-search__advance -->
						</form><!-- .listing-search__form -->
					</section><!-- .listing-search -->

					<section class="listing-sort">
						<div class="listing-sort__inner">

							<span class="listing-sort__result">1-9 of 25 results</span>

							<p class="listing-sort__sort">
								<label for="sort-type" class="listing-sort__label"><i class="fa fa-sort-amount-asc" aria-hidden="true"></i> Sort by </label>
								<select name="sort-type" id="sort-type" class="ht-field listing-sort__field" data-dkcacheid="8">
									<option value="default">Adding Time</option>
									<option value="low-price">Price (Low to High)</option>
									<option value="high-price">Price (High to Low)</option>
									<option value="featured">Most Viewed</option>
								</select>
							</p>
						</div><!-- .listing-sort__inner -->
					</section><!-- .listing-sort -->
				</div><!-- .main-search__container -->
			</div><!-- .container -->
		</section>

		<h1 style="color:red;margin-left:300px;">
			{% if info %}
			{{info}}
			{% endif %}
			{{request.COOKIES.basement}}
		</h1>

		<div class="container">

			<!-- Page Heading -->
			<h1 class="my-4" style="color:#002053">Properties List
				<small>On sale</small>
			</h1>

			<div class="row">
				{% for property in properties %}
				<div class="col-md-6 item-grid__container">
					<div class="listing">
						<div class="item-grid__image-container">
							<a href="{% url 'details' property.id %}">
								<div class="item-grid__image-overlay"></div><!-- .item-grid__image-overlay -->
								<img src="{%  url 'main_picture' property.id %}" alt="Image not available" class="listing__img" style="height:400px;">
								<!--<span class="listing__favorite"><i class="fa fa-heart-o" aria-hidden="true"></i></span>-->
							</a>
						</div><!-- .item-grid__image-container -->

						<div class="item-grid__content-container">
							<div class="listing__content">
								<div class="listing__header">
									<div class="listing__header-primary col-md-10">
										<h3 class="listing__title" ><a href="{% url 'details' property.id %}" style="color:#002053">{{property.address}}</a></h3>
										<p class="listing__location"></span> {{property.description}} </p>
									</div><!-- .listing__header-primary -->
									<p class="listing__price">$ {{property.list_price}}</p>
								</div><!-- .listing__header -->
								<div class="listing__details">
									<ul class="listing__stats">
										<li><span class="listing__figure">{{property.bedroom}}<sup>+</sup></span> Bedroom(s)</li>
										<li><span class="listing__figure">{{property.bath}}</span> Bath(s)</li>
										<li><span class="listing__figure">{{property.size}}</span> sq.ft</li>
									</ul><!-- .listing__stats -->
									<a href="{% url 'details' property.id %}" class="listing__btn">Details <span class="listing__btn-icon"><i class="fa fa-angle-right" aria-hidden="true"></i></span></a>
								</div><!-- .listing__details -->
							</div><!-- .listing-content -->
						</div><!-- .item-grid__content-container -->
					</div><!-- .listing -->
				</div>

				{% endfor %}

			</div>

			<hr>

			<!-- Pagination -->
			{% if properties.has_other_pages %}
			<ul class="pagination justify-content-center">
				{% if properties.has_previous %}
				  <li><a href="{% url 'properties' %}?page={{ properties.previous_page_number }}">&laquo;</a></li>
				{% else %}
				  <li class="disabled"><span>&laquo;</span></li>
				{% endif %}
				{% for i in properties.paginator.page_range %}
				  {% if properties.number == i %}
					<li><span style="background-color:#1a75ff;color:white;">{{ i }}</span></li>
				  {% else %}
					<li><a href="{% url 'properties' %}?page={{ i }}">{{ i }}</a></li>
				  {% endif %}
				{% endfor %}
				{% if properties.has_next %}
				  <li><a href="{% url 'properties' %}?page={{ properties.next_page_number }}">&raquo;</a></li>
				{% else %}
				  <li class="disabled"><span>&raquo;</span></li>
				{% endif %}
			</ul>
			{% endif %}
		</div>
	</div>
	<!-- /#page-content-wrapper -->

</div>

<!-- /.container -->

{% endblock %}
